
# API(服务端)

**当前版本号：V2.2**

## 1. 用户二次验证

**接口地址**: (平台类型说明：具体要对接的平台类型找运营提供)

- 浩凡：http://crmin.haofangame.com/htmlApi/checkHtmlToken.jhtml
- 蓝启：http://pay-api.lanqigame.cn/htmlApi/checkHtmlToken.jhtml
- 零界复用：http://pay-api.ljhygame.cn/htmlApi/checkHtmlToken.jhtml
- 麦叽网络：http://pay-api.2255game.cn/htmlApi/checkHtmlToken.jhtml
- 零界网络，零六，鼎点：http://crmin.qu06.cn/htmlApi/checkHtmlToken.jhtml

**请求方式**: POST

**请求参数**:

| 字段名 | 变量名 | 说明 |
|--------|--------|------|
| token | token | 用户token（必传，调用注册登陆接口成功后，返回的参数值） |
| pid | pid | pid（必传，由平台提供的参数） |
| ip | ip | ip（用户ip，可不传） |

**返回参数**:

返回数据为JSON格式

```json
{
  "code": "100",
  "data": "UU1000",
  "msg": "校验成功"
}
```

**返回值code说明**:

| code | 说明 |
|------|------|
| >100 | 失败 |
| 100 | 成功 |

## 2. 支付结果通知

**请求方式**: POST  
**说明**: 由研发提供回调地址（后台配置）

**通知参数**:

| 字段名 | 变量名 | 说明 |
|--------|--------|------|
| 订单号 | orderId | 此订单号由开发者生成，可用于对账、客服支持等 |
| 玩家帐号 | userNo | 玩家登录成功客户端回传的用户名 |
| 充值金额 | amount | 订单充值的金额，单位（只接收 >=1 的整数位金额） |
| 扩展参数 | extra | 此参数调用sdk传入的扩展参数，原样传回 |
| 签名验证 | flag | MD5(orderId+userNo+amount+extra+PKEY) |

**注意**:
- 传递参数字符集统一采用UTF-8
- 签名结果为了方便比较，统一转换为大写字符
- "+"符号不参与签名计算

**响应要求**:
研发收到通知时，必须给予响应，返回信息格式：
```json
{
  "code": "100",
  "data": "成功",
  "msg": ""
}
```

**返回值code说明**:

| code | 说明 |
|------|------|
| >100 | 失败 |
| 100 | 成功 |

**重要提示**:
- 如开发者无响应，则后台会进入每三分钟一次的补单通知
- 厂商必须对内购id的实际金额和下游传的订单金额进行比较
```
